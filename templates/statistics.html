{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="stats-container">
    <div class="stats-box recently-aired">
        <h3>Recently Aired</h3>
        {% if stats.recently_aired %}
            <ul>
            {% for item in stats.recently_aired %}
                <li style="color: #FFA500;">
                    {{ item.title }} S{{ '%02d'|format(item.season) }}E{{ '%02d'|format(item.episode) }} - 
                    <span class="air-date" style="color: #f4f4f4;">
                        {% if item.air_datetime.date() == stats.today %}
                            Today
                        {% elif item.air_datetime.date() == stats.yesterday %}
                            Yesterday
                        {% else %}
                            {{ item.air_datetime.strftime('%Y-%m-%d') }}
                        {% endif %}
                    </span>
                    <span class="air-time" style="color: #f4f4f4;">at {{ item.air_datetime.strftime('%H:%M') }}</span>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No shows aired recently.</p>
        {% endif %}
    </div>

    <div class="stats-box airing-soon">
        <h3>Airing Soon</h3>
        {% if stats.airing_soon %}
            <ul>
            {% for item in stats.airing_soon %}
                <li style="color: #FFA500;">
                    {{ item.title }} S{{ '%02d'|format(item.season) }}E{{ '%02d'|format(item.episode) }} - 
                    <span class="air-date" style="color: #f4f4f4;">
                        {% if item.air_datetime.date() == stats.today %}
                            Today
                        {% elif item.air_datetime.date() == stats.tomorrow %}
                            Tomorrow
                        {% else %}
                            {{ item.air_datetime.strftime('%Y-%m-%d') }}
                        {% endif %}
                    </span>
                    <span class="air-time" style="color: #f4f4f4;">at {{ item.air_datetime.strftime('%H:%M') }}</span>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No shows airing soon.</p>
        {% endif %}
    </div>

    <div class="stats-box upcoming-releases">
        <h3>Upcoming Releases</h3>
        {% if stats.upcoming_releases %}
            <ul>
            {% for item in stats.upcoming_releases %}
                <li style="color: #FFA500;">
                    {{ item.titles|join(', ') }} - 
                    <span class="release-date" style="color: #f4f4f4;">
                        {% if item.release_date == stats.today %}
                            Today
                        {% elif item.release_date == stats.tomorrow %}
                            Tomorrow
                        {% else %}
                            {{ item.release_date }}
                        {% endif %}
                    </span>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No upcoming releases in the next week.</p>
        {% endif %}
    </div>

    <div class="stats-box collection-stats">
        <h3>Collection Statistics</h3>
        <div class="stat-items">
            <div class="stat-item">
                <p>Total Movies: <span id="total-movies">{{ stats.total_movies }}</span></p>
            </div>
            <div class="stat-item">
                <p>Total TV Shows: <span id="total-shows">{{ stats.total_shows }}</span></p>
            </div>
            <div class="stat-item">
                <p>Total Episodes: <span id="total-episodes">{{ stats.total_episodes }}</span></p>
            </div>
            <div class="stat-item uptime">
                <p>Uptime: <span id="uptime">{{ '%d days, %d hours, %d minutes' % (stats.uptime // 86400, (stats.uptime % 86400) // 3600, (stats.uptime % 3600) // 60) }}</span></p>
            </div>
        </div>
    </div>
</div>
{% endblock %}