{% extends "base.html" %}
{% block title %}Settings{% endblock %}
{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/settings.css') }}">
    <script>
        console.log("Setting scraperSettings in head");
        window.scraperSettings = {{ scraper_settings | tojson | safe }};
        console.log("window.scraperSettings:", window.scraperSettings);

        // Add content source settings
        window.contentSourceSettings = {{ content_source_settings | tojson | safe }};
        console.log("window.contentSourceSettings:", window.contentSourceSettings);
    </script>
{% endblock %}
{% block content %}
<div class="settings-container">
    <h2>Settings</h2>
    <div class="settings-tabs">
        <button type="button" class="settings-tab-button active" data-tab="required">Required Settings</button>
        <button type="button" class="settings-tab-button" data-tab="scrapers">Scrapers</button>
        <button type="button" class="settings-tab-button" data-tab="scraping">Scraping Settings</button>
        <button type="button" class="settings-tab-button" data-tab="content-sources">Content Sources</button>
        <button type="button" class="settings-tab-button" data-tab="additional">Additional Settings</button>
        <button type="button" class="settings-tab-button" data-tab="debug">Debug Settings</button>
    </div>
    
    <div id="settingsForm">
        <div id="required" class="settings-tab-content active">
            {% include 'settings_tabs/required.html' %}
        </div>
        <div id="scraping" class="settings-tab-content" style="display: none;">
            {% include 'settings_tabs/scraping.html' %}
        </div>
        <div id="content-sources" class="settings-tab-content" style="display: none;">
            {% include 'settings_tabs/content_sources.html' %}
        </div>
        <div id="additional" class="settings-tab-content" style="display: none;">
            {% include 'settings_tabs/additional.html' %}
        </div>
        <div id="debug" class="settings-tab-content" style="display: none;">
            {% include 'settings_tabs/debug.html' %}
        </div>
    </div>

    <div id="scrapers" class="settings-tab-content" style="display: none;">
        {% include 'settings_tabs/scrapers.html' %}
    </div>

    <button type="button" id="saveSettingsButton" class="settings-submit-button">Save Settings</button>
    
    <div id="saveStatus"></div>
</div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/settings.js') }}"></script>
{% endblock %}